# 🛠 Assembler for Custom Assembly Language

## 📌 Overview

This project involved the development of an assembler for a specialized assembly language. Its primary aim was to convert human-readable assembly instructions into binary machine code, bridging the gap between high-level programming concepts and low-level execution on computers.

Implemented in `ANSI C`, this project demonstrates a strong understanding of foundational programming principles. It was part of the `20465 System Programming Laboratory` course at _The Open University of Israel_ and achieved a grade of `98`.

![Alt text](image-1.png)
---

## 🧩 Modules

The assembler includes several modules:

- `📝 pre.c`: Manages preprocessing tasks, including macro expansion and line numbering.
- `🔎 syntax.c`: Ensures syntax accuracy, checking for valid opcodes and operands.
- `🚦 first_pass.c`: Conducts the first assembly pass, generating a symbol table and computing label memory addresses.
- `🚀 second_pass.c`: Performs the second pass, producing the machine code and data images.
- `🖨️ print_output.c`: Prints output files such as the machine code file, external data words file, and entry type symbols file.
- `🏁 main.c`: Coordinates the other modules to produce the final output.

## 🤖 Usage

Use the assembler by providing an input file with assembly code. The output includes several files: a machine code file, an external data words file, and an entry type symbols file.

```bash
make
./assembler {input - without .as extension. e.g. input_example}
```

## Examples

### Successful Assembly Output

The screenshots below demonstrate the successful output files generated by the assembler from the [input_example.as](input_example.as) file:

- Assembly Code Snippet (`ps.am`):

    ```assembly
    ; Assembly code that defines data, strings, and contains various instructions
    ; including 'add', 'prn', 'lea', 'inc', 'mov', 'sub', 'bne', 'cmp', 'dec', and 'stop'.
    .entry LIST
    .extern  W
    MAIN:  add r3,LIST
    LOOP:  prn #48
      macro m1                      ; macro definition
      inc r6
      mov r3, W
      endm
      lea STR, r6
      m1 ; macro call
      sub r1, r4
      bne END
      cmp vall, #-6
      bne END[r15]
      dec K
    .entry MAIN
      sub LOOP[r10],r14
    END:  stop
    STR:  .string "abcd"
    LIST:  .data 6,-9
      .data -100
    .entry K
    K:  .data 31
    .extern va
    ```

    _note: the macro will be expanded in the preprocessor stage:_

    ```assembly
    .entry LIST
    .extern  W
    MAIN:  add r3,LIST
    LOOP:  prn #48
      lea STR, r6
      inc r6
      mov r3, W
      sub r1, r4
      bne END
      cmp vall, #-6
      bne END[r15
      dec K
    .entry MAIN
      sub LOOP[r10],r14
    END:  stop
    STR:  .string "abcd"
    LIST:  .data 6,-9
      .data -100
    .entry K
    K:  .data 31
    .extern vall
    ```

- Entry Symbol Table (`input_example.ent`):

    ```plaintext
      ; List of entry symbols and their addresses
      K,0144,0005
      LIST,0144,0002
      MAIN,0096,0004
    ```

- External Symbol References (`input_example.ext`):

    ```plaintext
      ; External symbols and their references in the code
      vall BASE 0125
      vall OFFSET 0126
      W BASE 0115
      W OFFSET 0116
    ```

- Machine Code Output (`input_example.ob`):

    ```plaintext
    ; Binary representation of the assembly code
    41 9
    0100 A4-B0-C0-D0-E4
    ... (additional lines of machine code)
    0149 A4-B0-C0-D1-Ef
    ```

### Error Handling

Below is a screenshot showing how the assembler handles various syntax and semantic errors from [errors_example.as](errors_example.as). Each error message is designed to be descriptive, guiding the user to identify and rectify the issues within the assembly code.

![Assembler Error Handling](Screenshot%20from%20errors_example.png)

The error messages include issues like undefined operations, missing operands, invalid target registers, and failures to find symbols for direct addressing mode, showcasing the assembler's comprehensive error-checking capabilities.

## 👥 Contributing

Contributors are welcome! Fork the repository and submit a pull request with your changes. Please ensure your contributions are well-tested and adhere to the project's coding standards.

## 📜 License

This project is licensed under the MIT License.
